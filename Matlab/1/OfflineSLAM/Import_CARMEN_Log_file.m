%% Import data from text file.
% Script for importing data from the following text file:
%
%    I:\Project 448\Project\Code\Matlab\OfflineSLAM\MIT_Infinite_Corridor_2002_09_11_same_floor.gfs.log
%
% To extend the code to different selected data or a different text file,
% generate a function instead of a script.

% Auto-generated by MATLAB on 2018/10/01 10:13:05

%% Initialize variables.
filename = 'I:\Project 448\Project\Code\Matlab\OfflineSLAM\MIT_Infinite_Corridor_2002_09_11_same_floor.gfs.log';
delimiter = ' ';

%% Format for each line of text:
%   column1: categorical (%C)
%	column2: double (%f)
%   column3: double (%f)
%	column4: double (%f)
%   column5: double (%f)
%	column6: double (%f)
%   column7: double (%f)
%	column8: double (%f)
%   column9: double (%f)
%	column10: double (%f)
%   column11: double (%f)
%	column12: double (%f)
%   column13: double (%f)
%	column14: double (%f)
%   column15: double (%f)
%	column16: double (%f)
%   column17: double (%f)
%	column18: double (%f)
%   column19: double (%f)
%	column20: double (%f)
%   column21: double (%f)
%	column22: double (%f)
%   column23: double (%f)
%	column24: double (%f)
%   column25: double (%f)
%	column26: double (%f)
%   column27: double (%f)
%	column28: double (%f)
%   column29: double (%f)
%	column30: double (%f)
%   column31: double (%f)
%	column32: double (%f)
%   column33: double (%f)
%	column34: double (%f)
%   column35: double (%f)
%	column36: double (%f)
%   column37: double (%f)
%	column38: double (%f)
%   column39: double (%f)
%	column40: double (%f)
%   column41: double (%f)
%	column42: double (%f)
%   column43: double (%f)
%	column44: double (%f)
%   column45: double (%f)
%	column46: double (%f)
%   column47: double (%f)
%	column48: double (%f)
%   column49: double (%f)
%	column50: double (%f)
%   column51: double (%f)
%	column52: double (%f)
%   column53: double (%f)
%	column54: double (%f)
%   column55: double (%f)
%	column56: double (%f)
%   column57: double (%f)
%	column58: double (%f)
%   column59: double (%f)
%	column60: double (%f)
%   column61: double (%f)
%	column62: double (%f)
%   column63: double (%f)
%	column64: double (%f)
%   column65: double (%f)
%	column66: double (%f)
%   column67: double (%f)
%	column68: double (%f)
%   column69: double (%f)
%	column70: double (%f)
%   column71: double (%f)
%	column72: double (%f)
%   column73: double (%f)
%	column74: double (%f)
%   column75: double (%f)
%	column76: double (%f)
%   column77: double (%f)
%	column78: double (%f)
%   column79: double (%f)
%	column80: double (%f)
%   column81: double (%f)
%	column82: double (%f)
%   column83: double (%f)
%	column84: double (%f)
%   column85: double (%f)
%	column86: double (%f)
%   column87: double (%f)
%	column88: double (%f)
%   column89: double (%f)
%	column90: double (%f)
%   column91: double (%f)
%	column92: double (%f)
%   column93: double (%f)
%	column94: double (%f)
%   column95: double (%f)
%	column96: double (%f)
%   column97: double (%f)
%	column98: double (%f)
%   column99: double (%f)
%	column100: double (%f)
%   column101: double (%f)
%	column102: double (%f)
%   column103: double (%f)
%	column104: double (%f)
%   column105: double (%f)
%	column106: double (%f)
%   column107: double (%f)
%	column108: double (%f)
%   column109: double (%f)
%	column110: double (%f)
%   column111: double (%f)
%	column112: double (%f)
%   column113: double (%f)
%	column114: double (%f)
%   column115: double (%f)
%	column116: double (%f)
%   column117: double (%f)
%	column118: double (%f)
%   column119: double (%f)
%	column120: double (%f)
%   column121: double (%f)
%	column122: double (%f)
%   column123: double (%f)
%	column124: double (%f)
%   column125: double (%f)
%	column126: double (%f)
%   column127: double (%f)
%	column128: double (%f)
%   column129: double (%f)
%	column130: double (%f)
%   column131: double (%f)
%	column132: double (%f)
%   column133: double (%f)
%	column134: double (%f)
%   column135: double (%f)
%	column136: double (%f)
%   column137: double (%f)
%	column138: double (%f)
%   column139: double (%f)
%	column140: double (%f)
%   column141: double (%f)
%	column142: double (%f)
%   column143: double (%f)
%	column144: double (%f)
%   column145: double (%f)
%	column146: double (%f)
%   column147: double (%f)
%	column148: double (%f)
%   column149: double (%f)
%	column150: double (%f)
%   column151: double (%f)
%	column152: double (%f)
%   column153: double (%f)
%	column154: double (%f)
%   column155: double (%f)
%	column156: double (%f)
%   column157: double (%f)
%	column158: double (%f)
%   column159: double (%f)
%	column160: double (%f)
%   column161: double (%f)
%	column162: double (%f)
%   column163: double (%f)
%	column164: double (%f)
%   column165: double (%f)
%	column166: double (%f)
%   column167: double (%f)
%	column168: double (%f)
%   column169: double (%f)
%	column170: double (%f)
%   column171: double (%f)
%	column172: double (%f)
%   column173: double (%f)
%	column174: double (%f)
%   column175: double (%f)
%	column176: double (%f)
%   column177: double (%f)
%	column178: double (%f)
%   column179: double (%f)
%	column180: double (%f)
%   column181: double (%f)
%	column182: double (%f)
%   column183: double (%f)
%	column184: double (%f)
%   column185: double (%f)
%	column186: double (%f)
%   column187: double (%f)
%	column188: double (%f)
%   column189: double (%f)
%	column190: categorical (%C)
%   column191: double (%f)
% For more information, see the TEXTSCAN documentation.
formatSpec = '%C%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%f%C%f%[^\n\r]';

%% Open the text file.
fileID = fopen(filename,'r');

%% Read columns of data according to the format.
% This call is based on the structure of the file used to generate this
% code. If an error occurs for a different file, try regenerating the code
% from the Import Tool.
dataArray = textscan(fileID, formatSpec, 'Delimiter', delimiter, 'MultipleDelimsAsOne', true, 'TextType', 'string', 'EmptyValue', NaN,  'ReturnOnError', false);

%% Close the text file.
fclose(fileID);

%% Post processing for unimportable data.
% No unimportable data rules were applied during the import, so no post
% processing code is included. To generate code which works for
% unimportable data, select unimportable cells in a file and regenerate the
% script.

%% Create output variable
data = table(dataArray{1:end-1}, 'VariableNames', {'Command','num_values','dist_1','dist_4','dist_5','dist_6','dist_7','dist_8','dist_9','dist_10','dist_11','dist_12','dist_13','dist_14','dist_15','dist_16','dist_17','dist_18','dist_19','dist_20','dist_21','dist_22','dist_23','dist_24','dist_25','dist_26','dist_27','dist_28','dist_29','dist_30','dist_31','dist_32','dist_33','dist_34','dist_35','dist_36','dist_37','dist_38','dist_39','dist_40','dist_41','dist_42','dist_43','dist_44','dist_45','dist_46','dist_47','dist_48','dist_49','dist_50','dist_51','dist_52','dist_53','dist_54','dist_55','dist_56','dist_57','dist_58','dist_59','dist_60','dist_61','dist_62','dist_63','dist_64','dist_65','dist_66','dist_67','dist_68','dist_69','dist_70','dist_71','dist_72','dist_73','dist_74','dist_75','dist_76','dist_77','dist_78','dist_79','dist_80','dist_81','dist_82','dist_83','dist_84','dist_85','dist_86','dist_87','dist_88','dist_89','dist_90','dist_91','dist_92','dist_93','dist_94','dist_95','dist_96','dist_97','dist_98','dist_99','dist_100','dist_101','dist_102','dist_103','dist_104','dist_105','dist_106','dist_107','dist_108','dist_109','dist_110','dist_111','dist_112','dist_113','dist_114','dist_115','dist_116','dist_117','dist_118','dist_119','dist_120','dist_121','dist_122','dist_123','dist_124','dist_125','dist_126','dist_127','dist_128','dist_129','dist_130','dist_131','dist_132','dist_133','dist_134','dist_135','dist_136','dist_137','dist_138','dist_139','dist_140','dist_141','dist_142','dist_143','dist_144','dist_145','dist_146','dist_147','dist_148','dist_149','dist_150','dist_151','dist_152','dist_153','dist_154','dist_155','dist_156','dist_157','dist_158','dist_159','dist_160','dist_161','dist_162','dist_163','dist_164','dist_165','dist_166','dist_167','dist_168','dist_169','dist_170','dist_171','dist_172','dist_173','dist_174','dist_175','dist_176','dist_177','dist_178','dist_179','dist_180','dist_181','dist_182','X','Y','T','O_X','O_Y','O_T','IPC_TS','IPC_HN','LTS'});

%% Clear temporary variables
clearvars filename delimiter formatSpec fileID dataArray ans;

%% Create the angles used for the LiDAR sensor

angles = transpose(linspace(0,2*pi,data{1,2}));
scans = cell(1,height(data));
ranges = transpose(data{1,3:182});
temp = lidarScan(ranges,angles);
scans = {temp};
for i = (2:height(data))
    ranges = transpose(data{i,3:182});
    temp = lidarScan(ranges,angles);
    scans(i) = {temp};
end

%% Clear temporary variables
clearvars angles data i ranges temp;
    

%% Reduce the size of the scan set

%scans = scans(1:20:length(scans));
scans = scans(1:5:200);
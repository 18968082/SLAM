Probabilistic_Robotics_Chapter6_Robot_Perception
Measurements models describe the formation process be which sensor measurements generated in the physical world. Robots use sensors like cameras’ and range sensors. The specifics of the model that models the environment depends on the sensor used. The measurement model is described by the conditional probability distribution p(zt | xt,m) with xt being the robot pose, zt the measurement at time t and m the map of the environment. The inability for a sensor to measure a range to nearby objects is often called sensor noise. Technically this noise is predictable for example when a surface reflects the sensor measuring technique. This reflection can lead to large readings in error as the sensor would not be able to tell that the reading received for that specific measurement was reflected. These sensor errors can be caused by a multitude of things, yet these are sensor specific. In practice it is extremely difficult to model a sensor accurately. Probabilistic robotics accommodates inaccuracies of sensor models in the stochastic aspects, which is the modelling of the measurement process as a conditional probability density p(zt | xt). In practice, one can get away with extremely crude models. However when devising a probabilistic model care has to be taken to capture the different types of uncertainties that may affect a sensor measurement. For a range finding sensor, the output produced is an array of values representing the distances measured at specific angles of rotation, zt = {zt1, …, ztk}, where each entry represents a single range value. The measurement probability is obtained as the product of the individual measurement likelihoods, p(zt | xt,m) = k=1 product to k of p(ztk | xt,m), which amounts to an independence assumption between the noise in each individual measurement beam.
Maps
A map represents a list of objects in the environment along with their properties m =  (mq, …, mN). N is the total number of objects on the environment and each mn represents a specific property. Maps are usually indexed in two ways, feature-based and location-based. Feature-based maps, n is a feature index. The value of mn contains the properties of a feature as well as the cartesian location of the feature. In location-based maps the index n corresponds to a specific location. In planar maps it is common to denote a map element by mx,y instead of mn to make explicit that mx,y is the property of a specific world coordinate. Location-based maps are volumetric, in that they offer a label for any location in the world. Volumetric maps contain information not only about objects in the environment but also about the absence of objects or free space. Feature-based maps only specify the shape of the environment at the specific locations, namely locations of the objects contained I the map. Feature representation makes it easier to adjust the position of an object. Occupancy gird map are a location-based maps.
Beam models of range finders
The following is an approximate physical model of range finders. Four types of measurement errors will be considered: small measurement noise errors due to unexpected objects, errors due to failures to detect objects and random unexplained noise. The desired model p(zt | xt,m) is a mixture of four densities. 
Correct range with local measurement noise. In an ideal world a range finder would always measure the correct range to the nearest object in its measurement field. Lets us ztk* to represent the true range of the object measured by ztk. In location-based maps the true range can be determined using ray casting. However even if the sensor correctly measures the range to the nearest object, the value it returns is subject to error. This error arises from the limited resolution of range sensors, atmospheric effect on the measurement signal etc. The measurement noise is modelled by a narrow Gaussian with mean ztk* and deviation sigma-hit. phit is this Gaussian. The values measured by the range sensor are limited to the interval [0,zmax] where zmax denotes the maximum sensor range. The measurement probability is given by phit(ztk | xt,m) = 6.4-6.6. 
Unexpected objects. Environments of mobile robotics are dynamic but maps m are static. As a result, objects not contained in the map can cause range finders to produce surprisingly short ranges when compared to the map. An example is when people share the same space as the robot. One way of treating them as sensor noise, or as part of the state vector and estimate their location. Treated as sensor noise, unmodeled objects have the property that they cause ranges to be shorter than ztk*, not longer. The likelihood of sensing an unexpected object decreases with range. To seem imagine there are two people that independently and with the same fixed likelihood show up in the perceptual field of a proximity sensor. One person’s range is r1 and the second person’s range is r2. Let us further assume that r1<r2. Then we are more likely to measure r1 than r2. Whenever the first person is present, the sensor measures r1. For it to measure r2, the second person must be present and the first must be absent. Mathematically the probability of range measurements in such situations is described by an exponential distribution. Look at 6.7-6.9. 
Failures. Sometimes obstacles are missed altogether. This can happen due to specular reflection. Failures also occur with laser range finders when sensing black, light-absorbing objects or for some laser systems when measuring objects in bright sunlight. A typical result of a sensor failure is a max-range measurement. This case is modelled by a point-mass distribution centred at zmax. This density function is discrete.
Random measurements. These measurements can be produced by phantom readings which is when readings bounce off walls or when they are subject to cross-talk between different sensors. These are unexplained measurements. These errors are modelled by a uniform distribution spread over the entire measurement range, [0,zmax] or 6.11. The combined density is represented by 6.12.
Adjusting the intrinsic model parameters, which include zhit, zshort, zmax, zrand, sigma-hit, lamda-short. One way to determine these parameters is from data. An acceptable way of setting the parameters is by simply guessing the values until the resulting density until it agrees with the data. Another way is to learn these parameters from the data. This is achieved by maximizing the likelihood of a reference data set Z with associated positions X and map m. All of these data sets are real measurements and the likelihood of Z is then given by p(Z | X,m,Theta) , which can make us of a maximum likelihood estimator. The algorithm presented in table 6.2 is an instance of the expectation maximization algorithm.
Mathematical derivation of the beam model. To derive the ML estimator we will introduce auxiliary variables ci, the correspondence variable. Each ci can take one of four values, hit, short, max, random. If we know all ci values, we know which of the four mechanisms produced zi, thus we then decompose Z into four disjoint set zhit, zshort, zmax, zrandom. The intrinsic parameters are then just the normalized ratios of the previous variables, 6.14. To calculate sigma-hit and lamda-short we use 6.15. For computation reasons, one must maximize the log-likelihood of the measurement probability given the map, pose and parameters. Looking at 6.16-6.23. Due to the above formulae not having a closed-form solution, an EM algorithm is used to iteratively obtain the log-likelihood. The EM algorithm equation is given by 6.26.
Likelihood fields for range finders. 

** finish this **
